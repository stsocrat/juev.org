<!DOCTYPE html>
<!--
    You can email me with PGP-key: 0xE8ADA1A55B3CA4EA
-->
<html lang="ru">
<head>
  <link rel="dns-prefetch" href="https://static.juev.org">
  <meta charset="utf-8">
  <title>awesome: настройка и использование</title>
  <meta name="description" content="Итак, в прошлой статье awesome: установка и запуск мы рассмотрели, как установить awesome и обеспечить его запуск при загрузке системы.  Теперь рассмотрим самое интересное – его конфигурацию.  Для ...">
  <meta name="yandex-verification" content="59bb4b98872e096b" />
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- end -->
  <link rel="canonical" href="https://www.juev.org/2009/05/18/awesome-nastrojka/">
  <link rel="shortcut icon" href="https://static.juev.org/favicon.ico">
  <link rel="apple-touch-icon" href="https://www.juev.org/apple-touch-icon.png">
  <link rel="alternate" type="application/atom+xml" title="ATOM Feed" href="https://www.juev.org/atom.xml">
  <link rel="stylesheet" type="text/css" href="https://static.juev.org/assets/css/master.6bbfa8b61.css">
  <link rel="prev" href="https://www.juev.org/2009/05/14/reklama-v-internete/">
  <link rel="next" href="https://www.juev.org/2009/05/18/awesome-ustanovka-i-zapusk/">
  <!-- og:meta -->
  <meta content="awesome: настройка и использование" property="og:title">
  <meta content="Итак, в прошлой статье awesome: установка и запуск мы рассмотрели, как установить awesome и обеспечить его запуск при загрузке системы.  Теперь рассмотрим самое интересное – его конфигурацию.  Для ..." property="og:description">
  <meta content="https://www.juev.org/2009/05/18/awesome-nastrojka/" property="og:url">
  <meta content="2009-05-18T00:00:00+04:00" property="article:published_time">
  <meta content="awesome" property="article:tag">
  <meta content="wm" property="article:tag">
  <meta content="https://static.juev.org/images/calvin.png" property="og:image">
  <meta content="https://denis.evsyukov.org" property="article:author">
  <!-- end og:meta  -->
  <!-- twitter card -->
  <meta content="summary_large_image" name="twitter:card">
  <meta content="awesome: настройка и использование" name="twitter:title">
  <meta content="Итак, в прошлой статье awesome: установка и запуск мы рассмотрели, как установить awesome и обеспечить его запуск при загрузке системы.  Теперь рассмотрим самое интересное – его конфигурацию.  Для ..." property="twitter:description">
  <meta content="https://www.juev.org/2009/05/18/awesome-nastrojka/" name="twitter:url">
  <meta content="https://static.juev.org/images/calvin.png" property="twitter:image:src">
  <!-- end twitter card -->
</head>
<body class="wide">
  <div class="navigation">
    <div class="width-fix">
        <a href="https://www.juev.org/" id="home" rel="nofollow"></a>
      <ul>
        <li><a href="https://www.juev.org/articles.html" rel="nofollow">Статьи</a></li>
        <li>|</li>
        <li><a href="https://denis.evsyukov.org">Об авторе</a></li>
      </ul>
    </div>
  </div>
  <div class="primary-content width-fix">
    <div class="entry"><h1 class="title">awesome: настройка и использование</h1>
<div id="metainfo">
<span class="date">18 May 2009</span>
<span class="tags"><a href="https://www.juev.org/tags/#awesome" title="View posts tagged with &quot;awesome&quot;" rel="nofollow">#awesome</a><a href="https://www.juev.org/tags/#wm" title="View posts tagged with &quot;wm&quot;" rel="nofollow">#wm</a></span>
</div>
<div class="post"><p>Итак, в прошлой статье <a rel="bookmark" href="/2009/05/18/awesome-ustanovka-i-zapusk/">awesome: установка и запуск</a> мы рассмотрели, как установить awesome и обеспечить его запуск при загрузке системы. Теперь рассмотрим самое интересное – его конфигурацию. Для этого начинаем менять файл <code class="highlighter-rouge">~/.config/awesome/rc.lua</code>, который скопировали в предыдущей статье.</p>

<p>Полный вариант моего конфигурационного файла: <a href="https://gist.github.com/1014780" rel="nofollow">gist.github.com/1014780</a>.</p>

<p>Для начала комментируем стандартную тему, устанавливая двойное тире – в начале нужной строки и прописываем свою:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>theme_path = "/home/juev/.config/awesome/themes/sky"
</code></pre></div></div>

<p>Не забудьте указать свой домашний каталог!</p>

<p>Затем коментируем почти все layout:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>layouts =
{
awful.layout.suit.tile,
--    awful.layout.suit.tile.left,
awful.layout.suit.tile.bottom,
--    awful.layout.suit.tile.top,
--    awful.layout.suit.fair,
--    awful.layout.suit.fair.horizontal,
--    awful.layout.suit.max,
--    awful.layout.suit.max.fullscreen,
--    awful.layout.suit.magnifier,
--    awful.layout.suit.floating
}
</code></pre></div></div>

<p>Здесь они комментируются для того, чтобы не использовать их при переборе вариантов расположения нажатием Ctrl+Space, но они могут в дальнейшем использоваться в других клавиатурных комбинациях. Оставили только два варианта – это tile и tile.bottom. Использовать авесоме и не использовать тилинговое расположение по умолчанию, не наш путь! :)</p>

<p>Кстати, layout описанный в данном списке первым используется по умолчанию.</p>

<p>Теперь описываем основные правила для отдельных приложений:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>floatapps =
{
["MPlayer"] = true,
--    ["Thunar"] = true,
["gcalctool"] = true,
--    ["Pidgin"] = true,
--    ["pinentry"] = true,
["gimp-2.6"] = true,
-- by instance
--    ["mocp"] = true,
-- Mozilla
["Dialog"] = true,
}
</code></pre></div></div>

<p>Как видно, часть приложений у меня закоментировано, так как в результате эксперимента выявил, что эти приложения лучше всего использовать в тилинговом режиме. В плавающем режиме оказываются mplayer, калькулятор, gimp и диалоговые окна.</p>

<p>Затем описываем основные правила расположения окон по рабочим столам:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apptags =
{
["Firefox"] = { screen = 1, tag = 2 },
["Conkeror"] = { screen = 1, tag = 2 },
["Emacs"] = { screen = 1, tag = 3 },
["Pidgin"] = { screen = 1, tag = 4 },
}
</code></pre></div></div>

<p>Параметр screen отвечает за монитор, у меня он один, поэтому везде используется значение 1, а параметр tag отвечает за рабочий стол, на котором будет запскаться конкретная программа. Итак – огнелис и conkeror запускаются на втором рабочем столе, емакс на третьем, а pidgin на четвертом. Все остальные окна будут открываться на текущем рабочем столе.</p>

<p>Затем меняем описание создания рабочих столов, с указанием используемого на нем layout:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- {{{ Tags
-- Define tags table.
tags = {}
for s = 1, screen.count() do
-- Each screen has its own tag table.
tags[s] = {}
-- Create 9 tags per screen.
tags[s][1] = tag(1)
tags[s][1].screen = s
awful.layout.set(awful.layout.suit.tile.bottom, tags[s][1])
tags[s][2] = tag(2)
tags[s][2].screen = s
awful.layout.set(awful.layout.suit.max, tags[s][2])
tags[s][3] = tag(3)
tags[s][3].screen = s
awful.layout.set(awful.layout.suit.max, tags[s][3])
tags[s][4] = tag(4)
tags[s][4].screen = s
awful.layout.set(awful.layout.suit.tile, tags[s][4])
tags[s][5] = tag(5)
tags[s][5].screen = s
awful.layout.set(awful.layout.suit.max, tags[s][5])
tags[s][6] = tag(6)
tags[s][6].screen = s
awful.layout.set(awful.layout.suit.max, tags[s][6])
tags[s][7] = tag(7)
tags[s][7].screen = s
awful.layout.set(awful.layout.suit.max, tags[s][7])
tags[s][8] = tag(8)
tags[s][8].screen = s
awful.layout.set(awful.layout.suit.max, tags[s][8])
tags[s][9] = tag(9)
tags[s][9].screen = s
awful.layout.set(awful.layout.suit.max, tags[s][9])
-- I'm sure you want to see at least one tag.
tags[s][1].selected = true
end
-- }}}
</code></pre></div></div>

<p>Как видно из кода, создаются теже 9 рабочих столов, имена которых соответствуют их порядковым номерам. На первом рабочем столе используется layout tile.bottom, на четвертом используется обычный tile, а на остальных max. Чем отличаются различные layout я описывать не буду, лучше посмотрите на практике.</p>

<p>Затем я изменил немного wibox, то есть расположение элементов на стандартной панели:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Create the wibox
mywibox[s] = wibox({ position = "top", fg = beautiful.fg_normal, bg = beautiful.bg_normal })
-- Add widgets to the wibox - order matters
mywibox[s].widgets = { mylauncher,
--                           mylayoutbox[s],
mytaglist[s],
mytasklist[s],
mypromptbox[s],
--                           mpdwidget,
s == 1 and mysystray or nil,
mytextbox, }
mywibox[s].screen = s
</code></pre></div></div>

<p>Здесь важен именно порядок указания определенных элементов.</p>

<p>Затем начинаем менять и описывать свои клавиатурные комбинации:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Prompt
key({ modkey }, "F1",
function ()
awful.prompt.run({ prompt = "Run: " },
mypromptbox[mouse.screen],
awful.util.spawn, awful.completion.bash,
awful.util.getdir("cache") .. "/history")
end),

key({ modkey }, "F4",
function ()
awful.prompt.run({ prompt = "Run Lua code: " },
mypromptbox[mouse.screen],
awful.util.eval, awful.prompt.bash,
awful.util.getdir("cache") .. "/history_eval")
end),

-- My keys
key( { "Mod1" }, "F2", function() awful.util.spawn( 'dmenu_run' ) end),
key( { modkey }, "F2", function() awful.util.spawn( 'dmenu_run' ) end),
key( {}, "F15", function() awful.util.spawn( 'gcalctool' ) end),
key( {}, "F14", function() awful.util.spawn( 'scrot -q 10' ) end),
key( { "Mod1" }, "F14", function() awful.util.spawn( 'scrot -q 10 -s' ) end),
key( {}, "F16", function() awful.util.spawn( 'firefox' ) end),
key( { "Mod1" }, "F16", function() awful.util.spawn( 'conkeror' ) end),
key( {}, "F17", function() awful.util.spawn( 'emacs' ) end),
key( {}, "F18", function() awful.util.spawn( 'thunar' ) end),
key( {}, "F19", function() awful.util.spawn( 'pidgin' ) end),
key( { "Mod1" }, "F19", function() awful.util.spawn( 'keepassx' ) end),
key( { modkey }, "F10", function() awful.util.spawn( '/home/juev/.scripts/off' ) end),

key({ modkey }, "Tab",  awful.tag.history.restore),
key({ "Mod1" }, "Tab", function () awful.client.focus.byidx(1); if client.focus then client.focus:raise() end end),
key({ "Mod1", "Shift" }, "Tab", function () awful.client.focus.byidx(-1);  if client.focus then client.focus:raise() end end),

--My Layout keys
key({ modkey }, "r", function() awful.layout.set(awful.layout.suit.tile) end),
key({ modkey }, "w", function() awful.layout.set(awful.layout.suit.tile.bottom) end),
key({ modkey }, "d", function() awful.layout.set(awful.layout.suit.magnifier) end),
key({ modkey }, "f", function() awful.layout.set(awful.layout.suit.floating) end),
key({ modkey }, "m", function() awful.layout.set(awful.layout.suit.max) end),

-- Multimedia keys
key( {}, "XF86AudioLowerVolume", function() awful.util.spawn( 'amixer -q set Master 5- unmute' ) end),
key( {}, "XF86AudioRaiseVolume", function() awful.util.spawn( 'amixer -q set Master 5+ unmute' ) end),
key( {}, "XF86AudioMute", function() awful.util.spawn( 'amixer -q sset Master toggle' ) end),

key( {}, "XF86AudioPrev", function() awful.util.spawn( 'mpc prev' ) end),
key( {}, "XF86AudioPlay", function() awful.util.spawn( 'mpc toggle' ) end),
key( {}, "XF86AudioNext", function() awful.util.spawn( 'mpc next' ) end),
</code></pre></div></div>

<p>Я переопределил сочетания для запуска программ с помощью самого авесоме на Win-F1, а запуск Lua-кода на Win-F4. Затем описал свои комбинации клавиш для запуска определенных программ и изменения layout. Более подробно по используемым командам я опишу в отдельной статье. А сейчас более подробно остановлюсь на комбинациях для установки layout. В моем случае комбинация Win-r переключает на tile, Win-w на tile.bottom, Win-d на magnifier, Win-f на float, Win-m на max. Таким образом одним нажатием клавиш тут же меняем раположение окон на экране. Это просто великолепно и очень удобно!</p>

<p>Затем идет описание клавиатурных сочетаний для активного окна:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Client awful tagging: this is useful to tag some clients and then do stuff like move to tag on them
clientkeys =
{
key({ modkey            }, "q",      function (c) c:kill()                         end),
key({ modkey,           }, "f",      function (c) c.fullscreen = not c.fullscreen  end),
key({ modkey, "Shift"   }, "c",      function (c) c:kill()                         end),
key({ modkey, "Control" }, "space",  awful.client.floating.toggle                     ),
key({ modkey, "Control" }, "Return", function (c) c:swap(awful.client.getmaster()) end),
key({ modkey,           }, "o",      awful.client.movetoscreen                        ),
key({ modkey, "Shift"   }, "r",      function (c) c:redraw()                       end),
key({ modkey }, "t", awful.client.togglemarked),
key({ modkey, "Shift"   }, "m",
function (c)
c.maximized_horizontal = not c.maximized_horizontal
c.maximized_vertical   = not c.maximized_vertical
end),
}
</code></pre></div></div>

<p>Здесь сочетания Win-q и Win-Shift-c убивают активные окна, Win-f переключает в полноэкранный режим (пока не работает, так как сочетание уже используется в глобальных комбинациях). Win-Ctrl-Space переключает активное окно во флоат-режим, Win-Ctrl-Return переносит активное окно в самую большую область, Win-Shift-r перерисовывает активное окно.</p>

<p>Я не люблю, когда фокус следует за мышью, поэтому закоментировал строки:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Hook function to execute when the mouse enters a client.
awful.hooks.mouse_enter.register(function (c)
-- Sloppy focus, but disabled for magnifier layout
--    if awful.layout.get(c.screen) ~= awful.layout.suit.magnifier
--        and awful.client.focus.filter(c) then
--        client.focus = c
--    end
end)
</code></pre></div></div>

<p>Если вам нравиться обратное, то лучше их не трогать.</p>

<p>Для того, чтобы между окнами в тайловом режиме не было свободных промежутков, убираем коментарий со строки:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Honor size hints: if you want to drop the gaps between
c.size_hints_honor = false
</code></pre></div></div>

<p>Для того, чтобы использовать вывод консольных программ в авесоме прописываем дополнительную функцию:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Запускаем команду и возвращаем ее вывод. Вы можете запускать команды со множеством выходящих строк
function execute_command(command)
local fh = io.popen(command)
local str = ""
for i in fh:lines() do
str = str .. i
end
io.close(fh)
return str
end
</code></pre></div></div>

<p>И напоследок описываем функцию, которая периодически вызывается и вывод ее затем используется в панели авесоме:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-- Hook called every minute
awful.hooks.timer.register(1, function ()
--    mytextbox.text = os.date(" %a %b %d, %H:%M ")
mytextbox.text = execute_command("sensors| grep temp3| awk '{print ($2)}'") .. " | " .. os.date("%a, %d %B %H:%M") .. " "
end)
</code></pre></div></div>

<p>По умолчанию производиться только вывод текущего времени, причем с незаданным форматом вывода. Я использую вызов системной команды sensors для определения температуры процессора и преоразую время в нужный мне формат.</p>

<p>Собственно все. Естественно я описывал только те возможности, что использую сам. Но, надеюсь, что хотя бы эта небольшая толика поможет вам разобраться с этим великолепным оконным менеджером. Стоит его только раз настроить и затем можно очень долгое время использовать туже конфигурацию. Пока разработчики не внесут опять какие-нибудь изменения в формат конфигурационного файла. Будем надеятся, что это будет происходить как можно реже…</p>
</div>
<div class="meta"><div class="pagination">
 <p class="previous">Previous post: <a rel="prev" href="https://www.juev.org/2009/05/14/reklama-v-internete/" title="View Реклама в интернете...">Реклама в интернете...</a></p>
 <p class="next">Next post: <a rel="next" href="https://www.juev.org/2009/05/18/awesome-ustanovka-i-zapusk/" title="View awesome: установка и запуск">awesome: установка и запуск</a></p></div>
</div>
</div>
  </div><!-- noindex -->
  <div class="footer">
    <div class="width-fix">
      <p><a href="https://www.juev.org/articles.html" rel="nofollow">Список статей</a> :: <a href="https://www.juev.org/recommendations/" rel="nofollow">Рекомендации</a> :: <a href="https://www.juev.org/atom.xml" rel="nofollow">RSS</a></p>
      <p>&copy;&nbsp;<a href="https://denis.evsyukov.org">Denis Evsyukov</a>,&nbsp;2008&ndash;2019&nbsp;Contact me via <script type="text/javascript">document.write("<n uers=\"znvygb:qravf\100riflhxbi\056bet\">Rznvy</n>".replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);}));</script>,&nbsp;
      <a href="https://twitter.com/#!/Juev" rel="nofollow">twitter</a> or&nbsp;
      <a href="https://github.com/Juev" rel="nofollow">github</a></p>
    </div>
  </div>
  <script async src="https://static.juev.org/assets/js/master.a08e4d4f.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-26480484-5', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
