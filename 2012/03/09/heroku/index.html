<!DOCTYPE html>
<!--
    You can email me with PGP-key: 0xE8ADA1A55B3CA4EA
-->
<html lang="ru">
<head>
  <link rel="dns-prefetch" href="https://static.juev.org">
  <meta charset="utf-8">
  <title>Heroku в качестве хостинга сайтов</title>
  <meta name="description" content="12 апреля 2012 года будет ровно год, как я использую для своих сайтов сервер Amazon EC2.  В среднем каждый месяц мне выставляют счет за использование машины и за трафик в пределах $8-$9.  Что много...">
  <meta name="yandex-verification" content="59bb4b98872e096b" />
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- end -->
  <link rel="canonical" href="https://www.juev.org/2012/03/09/heroku/">
  <link rel="shortcut icon" href="https://static.juev.org/favicon.ico">
  <link rel="apple-touch-icon" href="https://www.juev.org/apple-touch-icon.png">
  <link rel="alternate" type="application/atom+xml" title="ATOM Feed" href="https://www.juev.org/atom.xml">
  <link rel="stylesheet" type="text/css" href="https://static.juev.org/assets/css/master.6bbfa8b61.css">
  <link rel="prev" href="https://www.juev.org/2012/02/05/rails/">
  <link rel="next" href="https://www.juev.org/2012/03/12/sicp/">
  <!-- og:meta -->
  <meta content="Heroku в качестве хостинга сайтов" property="og:title">
  <meta content="12 апреля 2012 года будет ровно год, как я использую для своих сайтов сервер Amazon EC2.  В среднем каждый месяц мне выставляют счет за использование машины и за трафик в пределах $8-$9.  Что много..." property="og:description">
  <meta content="https://www.juev.org/2012/03/09/heroku/" property="og:url">
  <meta content="2012-03-09T19:22:00+04:00" property="article:published_time">
  <meta content="heroku" property="article:tag">
  <meta content="jekyll" property="article:tag">
  <meta content="hosting" property="article:tag">
  <meta content="https://static.juev.org/images/calvin.png" property="og:image">
  <meta content="https://denis.evsyukov.org" property="article:author">
  <!-- end og:meta  -->
  <!-- twitter card -->
  <meta content="summary_large_image" name="twitter:card">
  <meta content="Heroku в качестве хостинга сайтов" name="twitter:title">
  <meta content="12 апреля 2012 года будет ровно год, как я использую для своих сайтов сервер Amazon EC2.  В среднем каждый месяц мне выставляют счет за использование машины и за трафик в пределах $8-$9.  Что много..." property="twitter:description">
  <meta content="https://www.juev.org/2012/03/09/heroku/" name="twitter:url">
  <meta content="https://static.juev.org/images/calvin.png" property="twitter:image:src">
  <!-- end twitter card -->
</head>
<body class="wide">
  <div class="navigation">
    <div class="width-fix">
        <a href="https://www.juev.org/" id="home" rel="nofollow"></a>
      <ul>
        <li><a href="https://www.juev.org/articles.html" rel="nofollow">Статьи</a></li>
        <li>|</li>
        <li><a href="https://denis.evsyukov.org">Об авторе</a></li>
      </ul>
    </div>
  </div>
  <div class="primary-content width-fix">
    <div class="entry"><h1 class="title">Heroku в качестве хостинга сайтов</h1>
<div id="metainfo">
<span class="date">09 March 2012</span>
<span class="tags"><a href="https://www.juev.org/tags/#heroku" title="View posts tagged with &quot;heroku&quot;" rel="nofollow">#heroku</a><a href="https://www.juev.org/tags/#jekyll" title="View posts tagged with &quot;jekyll&quot;" rel="nofollow">#jekyll</a><a href="https://www.juev.org/tags/#hosting" title="View posts tagged with &quot;hosting&quot;" rel="nofollow">#hosting</a></span>
</div>
<div class="post"><p>12 апреля 2012 года будет ровно год, как я использую для своих сайтов сервер Amazon EC2. В среднем каждый месяц мне выставляют счет за использование машины и за трафик в пределах $8-$9. Что много меньше, чем если бы я использовал, как раньше, сервер на Linode. Хотя машины примерно одинакового типа.</p>

<p>Давно уже задумывался о том, чтобы размещать сайты на сервисе <a href="http://www.heroku.com" title="Heroku">Heroku</a>. Это уникальный сервис, на котором можно размещать свои веб-приложения различного уровня. И стоимость использования начинается от бесплатного. К примеру, если размещать статический сайт, который не использует базу данных, то за использование данного приложения платить не нужно совершенно.</p>

<p>Сложности начинаются в том случае, если используется чисто статический сайт, и не используются движки для его генерации. Приходиться прибегать к хакам.</p>

<h2 id="установка-и-использование">Установка и использование</h2>

<p>Для использования Heroku необходимо установить соответствующий gem:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo gem install heroku
</code></pre></div></div>

<p>И теперь можно создавать свое приложение:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir my-app &amp;&amp; cd my-app
$ heroku create --stack cedar
</code></pre></div></div>

<p>К данному моменту необходимо будет уже иметь регистрацию на сервере Heroku, нас спросят учетные данные, которые неободимо будет использовать при создании нашего приложения. И после создания уже можно опубликовать приложение на сервере, используя команду:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git push heroku master
</code></pre></div></div>

<p>А для того, чтобы открыть в браузере наш сайт, достаточно указать:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ heroku open
</code></pre></div></div>

<p>Если при открытии сайта возникает какая-то ошибка, нужно посмотреть логи на сервере. И опять же, для этого используется консоль:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ heroku logs --tail
</code></pre></div></div>

<p>Все очень удобно и довольно просто.</p>

<h2 id="статический-сайт">Статический сайт</h2>

<p>Для того, чтобы можно было бы публиковать статический сайт, в котором не используются определенные приложения, достаточно в корне сайта выполнить две команды:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ touch index.php
$ echo 'php_flag engine off' &gt; .htaccess
</code></pre></div></div>

<p>Первая команда преобразует наш статический сайт в PHP-приложение, а вторая команда отключает PHP для всего сайта.</p>

<h2 id="jekyll-on-heroku">Jekyll on Heroku</h2>

<p>Для того, чтобы использовать Jekyll на сервере Heroku, нужно совершить не так уж и много действий. При создании основы своего сайта достаточно использовать готовый шаблон <a href="https://github.com/markpundsack/jekyll-heroku" title="Jekyll-Heroku">Jekyll-Heroku</a>. По сути от обычного шаблона Jekyll отличается только начием файлов <code class="highlighter-rouge">Gemfile</code>, <code class="highlighter-rouge">Gemfile.lock</code> и <code class="highlighter-rouge">Procfile</code>.</p>

<p>Файл <code class="highlighter-rouge">Gemfile</code> содержит в себе перечень гемов, что будут использовать в нашем приложении. По умолчанию используется jekyll и Redcloth. Если в нашем сайте используется другой движок для обработки markdown, нужно его прописать. К примеру, я использую <code class="highlighter-rouge">kramdown</code>. Плюс я еще использую для сжатия css и js файлов <code class="highlighter-rouge">jammit</code>. А для создания файла <code class="highlighter-rouge">Gemfile.lock</code> достаточно в директории нашего сайта дать команду:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle install
</code></pre></div></div>

<p>Файл <code class="highlighter-rouge">Procfile</code> содержит в себе команду для запуска jekyll на сервере. И в предложенном шаблоне используется следующая строка:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web:	jekyll --server $PORT
</code></pre></div></div>

<p>Хотя куда удобне прописывать необходимые задачи в отдельном файле <code class="highlighter-rouge">Rakefile</code> и затем использовать вызов rake в файле <code class="highlighter-rouge">Procfile</code></p>

<p>После того, как создали или дополнили свой сайт необходимыми конфигурационными файлами, осуществляем публикацию сайта:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git push heroku master
Counting objects: 7, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 503 bytes, done.
Total 4 (delta 3), reused 0 (delta 0)

-----&gt; Heroku receiving push
-----&gt; Ruby/Rack app detected
-----&gt; Installing dependencies using Bundler version 1.1.rc.7
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from http://rubygems.org/.......
       Installing Platform (0.4.0)
       Installing open4 (1.3.0)
       Installing POpen4 (0.1.4)
       Using RedCloth (4.2.9)
       Using posix-spawn (0.3.6)
       Using albino (1.3.3)
       Using fast-stemmer (1.0.0)
       Using classifier (1.3.3)
       Using directory_watcher (1.4.1)
       Installing yui-compressor (0.9.6)
       Installing jammit (0.6.5)
       Using kramdown (0.13.5)
       Using liquid (2.2.2)
       Using syntax (1.0.0)
       Using maruku (0.6.0)
       Using jekyll (0.11.0)
       Using rack (1.4.1)
       Using tilt (1.3.3)
       Using sinatra (1.2.6)
       Using bundler (1.1.rc.7)
       Your bundle is complete! It was installed into ./vendor/bundle
       Cleaning up the bundler cache.
-----&gt; Discovering process types
       Procfile declares types     -&gt; web
       Default types for Ruby/Rack -&gt; console, rake
-----&gt; Compiled slug size is 6.4MB
-----&gt; Launching... done, v9
       http://juev-app.herokuapp.com deployed to Heroku

To git@heroku.com:juev-app.git
   1c4fb7b..2c57a1a  master -&gt; master
</code></pre></div></div>

<p>Да, список используемых гемов на моем сайте несколько превышает тот, что используется в шаблонах по умолчанию. Тестирование показало, что все работает просто замечательно!</p>

<p>Кстати, на Heroku можно использовать довольно большое число движков по генерации статических сайтов. Число используемых языков программирования довольно велико. И главное заключается в том, что использование таких небольших сайтов абсолютно бесплатно.</p>
</div>
<div class="meta"><div class="pagination">
 <p class="previous">Previous post: <a rel="prev" href="https://www.juev.org/2012/02/05/rails/" title="View Как установить Rails">Как установить Rails</a></p>
 <p class="next">Next post: <a rel="next" href="https://www.juev.org/2012/03/12/sicp/" title="View Готовим рабочую среду для изучения SICP">Готовим рабочую среду для изучения SICP</a></p></div>
</div>
</div>
  </div><!-- noindex -->
  <div class="footer">
    <div class="width-fix">
      <p><a href="https://www.juev.org/articles.html" rel="nofollow">Список статей</a> :: <a href="https://www.juev.org/recommendations/" rel="nofollow">Рекомендации</a> :: <a href="https://www.juev.org/atom.xml" rel="nofollow">RSS</a></p>
      <p>&copy;&nbsp;<a href="https://denis.evsyukov.org">Denis Evsyukov</a>,&nbsp;2008&ndash;2019&nbsp;Contact me via <script type="text/javascript">document.write("<n uers=\"znvygb:qravf\100riflhxbi\056bet\">Rznvy</n>".replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);}));</script>,&nbsp;
      <a href="https://twitter.com/#!/Juev" rel="nofollow">twitter</a> or&nbsp;
      <a href="https://github.com/Juev" rel="nofollow">github</a></p>
    </div>
  </div>
  <script async src="https://static.juev.org/assets/js/master.a08e4d4f.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-26480484-5', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
