---
layout: post
title: Переключение раскладки
keywords: ibus,emacs,ubuntu,scim
date: 2009-10-27 00:00
tags:
- ibus
- emacs
- ubuntu
---
Довольно долгое время я использовать wm в качестве рабочего окружения. Сначала в иксах убрали нормальное определение раскладки, сделали формат xml, не понятный нормальному человеку, и загружаемый отдельным демоном. Поэтому в качестве средства переключения системной раскладки клавиатуры я использовал SCIM. Были свои проблемы, типа огнелис не определял нажатия клавиш при включении программы, но жить можно было. Преимущества обычно перевешивали:
<ol>
	<li>SCIM запоминает раскладку каждого окна (даже больше, каждой вкладки у Pidgin)</li>
	<li>Переключение настраивается непосредственно в окне программы, а не в системе.</li>
	<li>Можно одновременно использовать целый набор различных раскладок, переключаясь между ними по горячей клавише или меню.</li>
</ol>
При этом клавиатуру я настраивал, используя xmodmap. Меняя, к примеру CapsLock на Ctrl или что-нибудь в этом роде.

Когда установил Ubuntu 9.10 обратил внимание на то, что в пункте Система-Параметры присутствует пункт <strong>iBus Preferences</strong>. Естественно задался вопросом, что это такое???

Как оказалось, SCIM больше не развивается и в качестве его замены создали ibus. Программа, которая позволяет с такой же легкостью работать со множеством раскладок, довольно проста в настройке и лишена тех недостатков, что были у SCIM.

Для того, чтобы установить и использовать SCIM, требовалось прочитать документацию в интернете, провести некоторые изменения и разобраться с настройками. Теперь, при использовании <strong>ibus</strong>, достаточно выбрать указанный выше пункт меню, на что получим вопрос о запуске демона. Ответив утвердительно, увидим окно со строчками, которые необходимо просто скопировать в свой файл <em>~/.bashrc</em>:

    export GTK_IM_MODULE=ibus
    export XMODIFIERS=@im=ibus
    export QT_IM_MODULE=ibus

После чего необходимо завершить сеанс работы и войти в свою учетную запись повторно. В области уведомления будет располагаться еще один значок в виде клавиатуры, правый щелчок по которому вызывает меню. При использовании русской локали в списке используемых раскладок будут перечислены четыре русских раскладок, которые будут использоваться при использовании горячей клавиши. Выбрав пункт меню "Параметры" можно провести настройку работы <strong>ibus</strong>, то есть выбрать нужные раскладки клавиатуры и соответственно горячие клавиши для активации и переключения между ними.

Так же, как и в SCIM, можно в системе указать приложения, которые будут игнорироваться <strong>ibus</strong>. Для этого создаем файл<em> ~/.Xdefaults</em> и прописываем примерно следующее:

    Emacs*useXIM:false

для игнорирования переключения раскладки в емаксе (для примера). Точно так же можно указать любую другую программу.Не забывая при этом при старте гнома выполнить команду:

    xrdb -load ~/.Xdefaults

К тому же, в Gnome очень просто и быстро отстраивается клавиатура. Достаточно выбрать пункт меню Система-Параметры-Клавиатура и провести соответствующую настройку. Здесь можно и назначать спецклавиши и менять CapsLock на Esc или Ctrl, меняя их местами или просто замещая. Вариантов масса, нужно только выбрать нужный. Настройка упрощается в разы, а удобство работы возрастает.

С каждым днем Ubuntu мне нравиться все больше и больше! Хотя, естественно, данные средства уже доступны не только в ней...
