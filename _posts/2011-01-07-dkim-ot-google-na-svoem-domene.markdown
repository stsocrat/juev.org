---
layout: post
title: DKIM от Google на своем домене
keywords: dkim,google,vps,mail,domain,почта,домен
date: 2011-01-07 00:00
tags:
- google
- dns
---
Сегодня Goolge обрадовал всех пользователей Google Apps введением новой функции -- функция подписывания сообщений с помощью <a href="http://www.dkim.org/" rel="nofollow">DomainKeys Identified Mail</a> (DKIM).

Подключить данную возможность довольно просто, но возникло несколько моментов, о которых хотелось бы рассказать.

Первая сложность заключается в том, что в русскоязычной панели управления доменом Google отсутствует данная функция. И появится там только после того, как ее переведут на русский язык. Мне пришлось просмотреть всю панель по несколько раз, чтобы в этом убедиться. И как только я в параметрах домена переключился на панель следующего поколения (сразу предупредили о том, что есть только английская версия), данная функция тут же появилась в разделе Advanced Tools.

В этом разделе функция представлена пятым пунктом и называется Authenticate email. Процесс настройки разбит на несколько шагов.

Первый шаг -- генерация ключа. Достаточно только выбрать домен, для которого производиться генерация и выбрать префикс, который будет использован при генерации. Если домен используется один, то префикс можно не менять. Если же несколько, то для каждого из доменов нужно выбирать отдельный и уникальный префикс.

На втором шаге нужно переключиться на вкладку с панелью управления доменным именем у
своего регистратора и создать новую запись для домена (тип TXT). <code>Record name</code>
устанавливаем в google.\_domainkey, а значение
<code>Record value</code> устанавливаем в генерированное значение.

<a href="https://static.juev.org/2011/01/google_apps.jpg"><img src="https://static.juev.org/2011/01/google_apps-300x180.jpg" alt="" title="google_apps" width="300" height="180" class="aligncenter size-medium wp-image-1312" /></a>

На данном шаге сложность может возникнуть из-за выбранного регистратора доменных имен. Не все они поддерживают создание TXT-записей. Мне повезло, я использую регистратора <a href="http://www.name.com" rel="nofollow">www.name.com</a> и никаких ограничений там нет.

После внесения изменений переключаемся в панель <code>Google Apps</code> и нажимаем кнопку Start Authentication. Должно пройти немного времени для того, чтобы обновились DNS-записи и изменения были подхвачены серверами Google. Они пишут, что может пройти до 48 часов, однако у меня изменения подхватились практически сразу.

Для теста достаточно отправить электронное письмо на другом домене. К сожалению, отправив письмо самому себе, подписи не увидишь.

<a href="https://static.juev.org/2011/01/email.png"><img src="https://static.juev.org/2011/01/email-300x115.png" alt="" title="email" width="300" height="115" class="aligncenter size-medium wp-image-1313" /></a>

Заметили дополнительное поле? <em>Подписан evsyukov.org</em>, вот ради этого мы и совершали все эти действия. Именно данная подпись позволит отличить ваши письма от фишинговых писем или писем спамеров. И позволит серверам электронной почты относиться более уважительно к вашим письмам, меньше отправляя их в папку спама.
