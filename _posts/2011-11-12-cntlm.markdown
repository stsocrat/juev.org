---
layout: post
title: Упрощаем работу с прокси
description: cntlm - как решение проблемы при работе с прокси-сервером с аутентификацией.
  Установка, настройка и использование.
keywords: ubuntu, proxy, ntlm, auth
date: 2011-11-12 14:37
tags:
- ubuntu
- tips
- services
---
На работе, в моем кабинете, провели некоторые изменения. Заменили все устаревшие компьютеры на новые ноутбуки и при этом поставили в качестве второй операционной системы Ubuntu.

Для выхода в интернет в нашей организации используется прокси-сервер с авторизацией. И в Windows 7, что стояла по умолчанию на ноутбуках, IE 9 спрашивал только один раз параметры аутентификации, после чего продолжал работать без каких-о дополнительных запросов. После установки Ubuntu возникли определенные проблемы. Firefox, что используется по умолчанию, ни в какую не собирался запоминать параметры аутентификации и постоянно ее запрашивал при своем запуске. Нужно было каким-то образом упростить данную ситуацию.

В качестве решения было предложено использовать еще один прокси-сервер, на этот раз уже локальный, в задачу которого входит только передача параметров аутентификации главному прокси-серверу. При этом все остальные приложения работают уже с обычным прокси, а значит не возникает вопросов с конфиденциальными данными.

В Ubuntu есть довольно много вариантов прокси-серверов, но было решено использовать **cntlm**. Устанавливаем:

    $ sudo apt-get update && sudo apt-get install cntlm

После установки сервис оказывается запущенным, но не настроенным. Исправляем данную ситуацию:

    $ sudo nano /etc/cntlm.conf

Здесь нам потребуется изменить только несколько параметров, если рассматривать минимально необходимую конфигурацию:

    Username	user
    #Domain		corp-uk
    Password	pass

    Proxy		192.168.1.1:3128

Обратите внимание на то, что имя основного прокси-сервера задается именно в виде ip-адреса. Параметры Username и Password соответственно передают имя пользователя и пароль.

Осталось перезапустить сервис и настроить программы на его использование:

    $ sudo service cntlm restart

Теперь во всех программах, которым необходим доступ в сеть интернет, указываем в качестве прокси-сервера **localhost:3128**.

После установки и настройки локального прокси-сервера, Firefox перестал спрашивать данные для аутентификации. Работать стало удобнее и немного более безопасно.
