---
layout: post
title: Криптография почтовых сообщений
description:
keywords: email, privacy, crypt, gpg, pgp, openpgp, email client, mail.app, thunderbird,
  mailmate, postbox
gplus: https://plus.google.com/116661482374124481456/posts/cNeBjqFWRPk
published: true
date: 2012-03-17 13:01
tags:
- mac
- security
- crypt
---

Каждый день люди отправляют миллионы писем в разные концы земного шара. Отправляют, но лишь небольшая часть всех пользователей задумывается о том, что каждое отправленное письмо проходит через множество серверов, прежде чем оказывается непосредственно у получателя.

На сегодняшний день многие почтовые провайдеры побеспокоились о том, чтобы хотя бы немного обезопасить своих пользователей от утечек информации. И создали защищенные каналы связи между сервером и пользователем. То есть когда мы отправляем письмо, уже можно исключить целую сеть интернет-провайдеров, через которых проходит сообщение, пока оно не будет доставлено на почтовый сервер. Но это только в том случае, если используется безопасный почтовый сервер, к примеру Google Mail, в то время как в случае с Mail.ru, и ему подобным, любое письмо может быть перехвачено еще на этапе отправки.

Но о чем я говорю? О каком перехвате? И кого может заинтересовать та информация, что я пишу своим друзьям и близким? Именно такие вопросы чаще всего возникают, когда люди слышат о вопросах шифрования электронной почты.

Но давайте немного подумаем. Каждое письмо обычно проходит через целый ряд почтовых серверов, на каждом из которых оно анализируется, как минимум, на предмет спама. И никто не может гарантировать того, что собранная информация нигде не собирается и никем не используется. И никто не может гарантировать того, что почтовый ящик будет взломан и вся корреспонденция окажется в руках третьих лиц.

Итак, что же можно сделать для того, чтобы устранить эту опасность? Естественно -- шифровать свою почту. В этом случае мы сможем не только передавать защищенные сообщения, которые сможет прочесть только получатель, но еще и подтверждать с помощью цифровой подписи, что именно мы является отправителем данного сообщения. Что так же немаловажно!

Осталось только разобраться с самой технологией работы.

### Технология работы

Для шифрования на сегодняшний день существует два пути -- использование PGP (платное приложение) и GPG (бесплатное приложение). Я попробовал тестовый вариант PGP и могу сказать, что от бесплатного оно мало отличается, только стоит очень дорого. Поэтому на этом варианте останавливаться не будем.

Установить GPG в систему довольно просто. Достаточно скачать с официальной страницы [gnupg](http://www.gnupg.org/download/ "Download - GnuPG.org") пакет для той операционной системы, что используется на компьютере и установить его. На странице представлены пакеты для трех основных операционных систем. Кроме того, на Linux можно установить GnuPG с использованием пакетного менеджера, что несколько упрощает ситуацию.

Практически вся работа с GnuPG ориентирована на использование командной строки. Абсолютно все операции, такие как работа с ключами, подписывание и шифрование, дешифрование, все это проводиться с помощью командной строки.

Таким образом, если мы установили только сам gpg, то для того, чтобы отправить зашифрованное письмо, нам необходимо создать текстовый файл, который затем в командой строке шифруется для определенного получателя. После чего его содержимое вставляется в новое сообщение почтовой программы и отправляется. И соответственно обратная ситуация в том случае, если мы получаем письмо.

Понятно, что совершать так много действий будет только тот человек, который заинтересован в защите своей рабочей переписке, но не тот, кого беспокоит анализ писем поисковой системой.

### Дополнения почтовых программ

Есть целый ряд расширений для почтовых программ, которые позволяют упростить работу с зашифрованными сообщениями. При этом можно полностью отказаться от использования командной строки.

**GPGMail** -- расширение для Mail.app, которое устанавливается пакетом MacGPG, позволяет шифровать и расшифровывать сообщения автоматически, работа с почтовой программой довольно прозрачна и удобна. И все бы ничего, только сама программа Mail.app не умеет нормально работать с Gmail.

Проблема заключается в том, что все ярлыки Gmail интерпретируются как отдельные папки, и если письму было назначено несколько ярлыков, то в программе возникают сразу несколько дубликатов письма. Пробовал отключать на сервере показ ряда imap-папок, но в итоге стало просто неудобно работать.

**Enigmail** -- расширение для почтовых программ Thunderbird и PostBox. Расширение значительно упрощает работу с зашифрованными сообщениями.

Но столкнулся с тем, что для того чтобы заставить нормально работать Thunderbird, приходиться прикладывать значительные усилия. Как и практически все бесплатные продукты, данная почтовая программа очень гибкая и настраиваемая, но недоведенная до ума. Приходиться много с ней работать, пока поведение программы будет адекватным. Неопытному пользователю это сделать будет довольно сложно.

PostBox же отлично работает с Gamil, достаточно только указать свои учетные данные. И все бы ничего, да только Enigmail для данной почтовой программы устанавливается с ошибкой, причем обновление расширения эту проблему не решает.

### Выводы

Вся информация о нас давно уже стала достоянием общественности. Нужно лишь протянуть руку и взять то, что нужно.

А вот для того, чтобы устранить данную опасность практически нет инструментов. Почему нет?

Потому что нет еще ни одного нормального почтового клиента, который смог бы корректно работать с серверами Google, и при этом имел бы возможность работать с зашифрованными сообщениями.

В почтовых клиентах либо нет поддержки шифрования вообще, либо предоставляется с помощью расширений, которые часто работают не корректно.

Вы можете себе представить девушку, которая получив письмо, копирует его содержимое в отдельный файл, проводит из командной строки его дешифрацию, читает, пишет ответ в отдельном файле, после чего шифрует его, копирует в ответ на это письмо и отправляет его? Я тоже не могу такого представить. Да, и если задуматься, при такой сложности работы, проще плюнуть на все и просто надеяться на то, что данная информация никому не будет нужна.

До тех пор, пока не будет разработана отдельная программа, которая прекрасно работает с Gmail, как к примеру [PostBox](http://www.postbox-inc.com/ "Postbox - Awesome Email") или [MailMate](http://freron.com/ "MailMate") и при этом умела бы прозрачно работать с зашифрованными сообщениями, не требуя от пользователя познаний в криптографии, никто не будет использовать шифрование в своей повседневной жизни.

Но, если честно, появление такой программы выглядит как мечта... Надеюсь, что когда-нибудь эта мечта станет реальностью. А до тех пор придется использовать почту в ее обычном режиме, без криптографии.

Ведь даже найти единомышленников, которые использовали бы шифрование почтовых сообщений при общении очень проблематично. И все из-за того, что нет необходимого программного обеспечения, которое было бы достаточно простым для обычных людей.
