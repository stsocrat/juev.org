---
layout: post
title: Шифрование последней мили
description: 
keywords: security, ec2, amazon, vpn, ssh, openssh, tunnel
gplus: https://plus.google.com/116661482374124481456/posts/fNtLegRmSAA
published: true
date: 2012-04-21 22:20
tags:
- amazon
- security
- vps
- ssh
---

При подключении к интернету абсолютно вся информация проходит через провайдера. И соответственно, любой провайдер знает, какие сайты вы посещаете, что смотрите и читаете, с кем общаетесь и какие учетные данные используете для входа на интернет-сервисы. А при использовании открытых wifi информация становиться легко доступна всем желающим.

Для того, чтобы избежать подобной участи, рекомендуют использовать шифрование последней мили. То есть весь трафик между вами и определенной точкой в интернете оказывается зашифрованным. А что происходит с ним дальше уже не имеет особого значения.

Для того, чтобы зашифровать последнюю милю можно использовать или целый ряд коммерческих сервисов, типа [TunnelBear](http://www.tunnelbear.com/ "TunnelBear Homepage") или [Tunnelr](https://www.tunnelr.com/ "Tunnelr VPN Service Provider"). Причем первый позволяет использоваться сервисом бесплатно с ограничением трафика в 500 мегабайт в месяц. А при проведении рекламной компании среди своих друзей в твиттере, это ограничение подымают до 1 гигабайта. 

Данные сервисы, помимо шифрования последней мили, позволяют бесплатно использовать интернет-сервисы, которые ориентированы только на американскую или английскую аудиторию, например lastfm, spotify, pandora, fox, hulu и другие.

Но тут вспомнил о том, что у меня есть свой сервер в Ирландии. Почему бы не использовать его для шифрования последней мили?

Так как для управления сервером я использую ssh с аутентификацией по ключам, мне достаточно было в окне терминала дать команду:

    $ ssh ec2 -N -D localhost:8080

Где ec2 -- это алиас сервера, прописанный в конфиге клиента openssh. Теперь остается в настройках системы указать использование SOCKS-прокси с адресом localhost и портом 8080. Если же используется windows, то данное прокси указывается в настройках браузера.

Преимуществом данного способа является то, что через зашифрованное соединение пускаются только определенные приложения. Все остальное работает без изменения, напрямую. В связи с чем шифрованию подвергается только конфиденциальная информация.

Стоимость одного гигабайта трафика на серверах amazon составляет 12 центов за гигабайт. То есть при использовании туннеля до сервера стоимость увеличивается незначительно.
