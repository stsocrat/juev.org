---
layout: post
title: Debian Jessie
date: 2015-05-02 09:09
tags:
- linux
- debian
- git
- github
---
Прошло около месяца с того момента, как на сервере я стал использовать Debian вместо Ubuntu. Почему? Потому что слишком много экспериментов проводят в Canonical, и очередное обновление программного обеспечения превращается обычно в эксперимент над самим собой. В Debian такого нет, и на сервере, на мой взгляд, лучше всего использовать именно Debian.

А в конце апреля анонсировали выход Debian 8. И для меня самым вкусным в этой версии было обновление Ruby до версии 2.1. Обновление провести очень просто:

    # sed -i 's/wheezy/jessie/g' /etc/apt/sources.list
    # apt-get update
    # apt-get dist-upgrade

После обновление потребуется перезагрузить сервер. И хочется обратить внимание на тот факт, что в случае с [DigitalOcean](https://www.digitalocean.com/?refcode=c5cb9e6574a7) обновление Kernel проводиться через панель управления. На момент, когда я проводил обновление сервера, новые версии Kernel еще не были доступны, но буквально на следующий день администраторы DO предоставили такую возможность. Поэтому не перезагружаем сервер, а именно полностью его останавливаем, используя команду:

    # poweroff

И затем в панели управления DO выбираем требуемую версию Kernel и снова запускаем сервер:

![do](https://static.juev.org/2015/05/do.png)

На изображении показано состояние уже после обновления.

Но как оказалось, помимо обновления Ruby, в новой версии Debian перешли на использование systemd для управления запуском сервисов при старте. Что позволило мне перейти от использования supervisor к systemd для запуска [webhooker](/2013/11/17/automation-jekyll/). Достаточно создать файл  по имени сервиса, с его описанием в директории `/etc/systemd/system/` вида:

    [Unit]
    Description=Github Webhook service

    [Service]
    Type=simple
    User=user
    WorkingDirectory=/home/user/bin
    ExecStart=/home/user/bin/webhooker -p 5010 -i 127.0.0.1 -c /home/user/bin/webhook.conf
    KillMode=process
    Restart=on-failure

    [Install]
    WantedBy=multi-user.target

Теперь для запуска сервиса достаточно использовать команду:

    # systemctl start webhook

Само обновление прошло гладко, и использование системы значительно упростилось. Классно ведь!
