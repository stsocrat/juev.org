---
layout: post
title: "Проблема с буфером обмена в Emacs"
date: 2015-06-10 08:32
image: https://static.juev.org/2015/06/emacs-yank.png
tags:
  - emacs
---

Прежде, чем начать, хотел бы сразу предупредить, что решения описываемоей проблемы я пока так и не нашел.

В последнее время Emacs использую только в консоли. Причем, подключаясь к постоянно работающему демону, с использованием `emacsclient`. На серверах устанавливаю Emacs, настраиваю его так же на работу в режиме демона, и подключаясь по ssh, работаю именно на удаленной машине. То есть в обоих случаях буфер обмена Emacs не может взаимодействовать с операционной системой локальной машины. И вставлять текст приходиться, используя системные комбинации клавиш, типа CMD-v или Shift-Insert.

Если во время вставки активен английский язык, то никаких проблем не наблюдается. Но стоит переключиться на русский (переключение именно в Emacs), то наблюдается следующая картина при вставке текста на английском языке:

[![emacs-kill-ring](https://static.juev.org/2015/06/emacs-yank.png)](https://static.juev.org/2015/06/emacs-yank.png "Emacs Kill Ring")

Если я все правильно понимаю, то вставка текста в описанных режимах работы, воспринимается как обычный ввод с клавиатуры, и символы преобразуются в ту кодировку, что в данный момент активна.

Предполагаемый вариант решения: не использовать Emacs на удаленных машинах, а запускать его на локальной машине и подключаться через Tramp. Но, так же выходит, что стоит отказаться и от режима демона?? Не вариант...
