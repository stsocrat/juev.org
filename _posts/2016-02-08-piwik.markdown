---
layout: post
title: "Бесплатный сервис статистики Piwik"
date: 2016-02-08 11:55
image: 
tags: 
  - openshift
  - services
---

Некоторое время назад я отказался от использования статистики в своих сайтах. Причина была простая, мне не хотелось распространять информацию о посетителях с Google, в целях обеспечения их конфиденциальности. Но любопытство в конце концов одержало вверх.

Решил поднять [Piwik](https://piwik.org/ "Piwik") на сервере [OpenShift](https://www.openshift.com/ "OpenShift: PaaS by Red Hat"). 

Во-первых, Red Hat предоставляют в бесплатное использование три минимальных машинки, одной из которых вполне достаточно для работы Piwik, и во-вторых, обнаружил готовый рецепт запуска Piwik в окружении OpenShift. Для его использования нам потребуются установленный на компьютере ruby, после чего используем следующие команды для установки официальной программы:

    $ gem install rhc
    $ rhc setup

Во время настройки rhc потребуется только ввести свой логин и пароль. И, наконец, используем команду для создания сервера:

    $ rhc app create piwik php-5.4 mysql-5.5 --from-code=git://github.com/openshift/piwik-openshift-quickstart.git

Если интересно, что происходит при выполнении данной команды, подробную информацию можно получить на странице [piwik-openshift-quickstart](https://github.com/openshift/piwik-openshift-quickstart "piwik-openshift-quickstart").

По умолчанию создается машинка с доменом:

    http://piwik-$yourlogin.rhcloud.com

Где `$yourlogin` соответственно ваш логин в сервисе OpenShift.

После завершения операции создания нового сервера, переходим по указанному адресу и проводим первичную настройку Piwik, которая состоит из нескольких последовательных шагов. 

После входа в систему рекомендуется создать дополнительного пользователя без прав администратора, а так же включить в списке плагинов двухфакторную аутентификацию от Google для защиты своих аккаунтов.

И теперь остается сделать только самое простое: это разместить код трекера на страницах своего сайта. 

Статистика по сайту выглядит так (одна из страниц):

[![piwik-dashboard](https://static.juev.org/2016/02/piwik-dashboard.png)](https://static.juev.org/2016/02/piwik-dashboard.png "Piwik Dashboard")

Обратите внимание на то, что в информации фигурируют усеченные IP-адреса, то есть информация по пользователям анонимизируется. На мой взгляд, поставленную задачу я решил.
