---
layout: post
title: Угроза от Dropbox
date: 2016-09-10 14:17
image: https://static.juev.org/2016/09/dropbox.jpg
tags:
- dropbox
- security
- osx
---

Несколько лет подряд использовал Dropbox в качестве основного файлового хранилища. И сейчас продолжаю, просто потому, что бесплатно имею в сервисе в общей сложности порядка 50 гигабайт, и при этом работает все слажено и без сбоев.

И сегодня встретил статью о том, что при установке Dropbox на OSX используется хак: [discovering how Dropbox hacks your mac](http://applehelpwriter.com/2016/08/29/discovering-how-dropbox-hacks-your-mac/ "discovering how Dropbox hacks your mac"). Как оказалось, во время установки Dropbox вызывает свое собственное окно для запроса пароля суперпользователя и затем использует эту информацию для того, чтобы предоставить самой себе привилегированные права.

Несколько странно предоставлять программе права, какие она только пожелает, не так ли? А если еще учитывать, что в совет директоров компании вошла [Кондолиза Райз](https://blogs.dropbox.com/dropbox/2014/04/growing-our-leadership-team/), то становиться немного страшновато.

Фактически получается, что устанавливая Dropbox на свой компьютер мы предоставляем компании неограниченные права доступа к своей собственной информации, даем право на управление нашим компьютером.

Права можно отобрать, ребята уже нашли несколько способов, первый:

1. закрываем приложение Dropbox из системного трея
1. удаляем директорию `/Library/DropboxHelperTools`
1. в настройках безопасности системы удаляем Dropbox из списка Accessibility
1. выходим из системы и логинимся заново
1. при каждом старте системы видим предложение Dropbox снова ввести ваш пароль для внесения изменений, игнорируем предложение, выбирая Cancel.

В данном случае недостатком является появление окна при каждом логине. Но и этот недостаток удалось решить:

1. Remove executable and suid bits and lock dbaccessperm file.

        cd /Library/DropboxHelperTools/Dropbox_u502
        sudo chmod -sx dbaccessperm
        sudo chflags uchg dbaccessperm

1. Remove (just uncheck) accessibility permission for Dropbox via System Settings.

После этого Dropbox продолжает работать в системе, но уже не обладает привилегированными правами. Теперь можно гарантировать, что управление вашим компьютером никто не перехватит, и что информация будет передаваться в Dropbox только та, что находиться внутри соответствующих директорий системы.

Как более безопасный вариант, перейти на использование другой системы, типа SpiderOak.
