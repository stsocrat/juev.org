---
layout: post
title: "Push уведомления в SIP-приложениях от Acrobits"
date: 2017-11-14 12:07
image:
tags:
  - sip
  - web
---
Про проблемы использования SIP я уже писал: [SIP для звонков](https://www.juev.org/2017/11/06/sip-programs/ "SIP для звонков"). После чего решил разобраться, почему у меня в ряде клиентов возникают проблемы со звонками. Обратился к разработчикам Bria Mobile и Acrobits Groundwire. Обе компании оперативно ответила на мои вопросы, но первые до сих пор разбираются, что у них не так. А вот вторые предложили рабочее решение.

Проблема с GroundWire заключалась в том, что при использовании push-уведомлений и при поступлении входящего звонка полностью отсутствовал звук. То есть ни меня не было слышно, ни я ничего не слышал. Мне предложили изменить настройки учетной записи:

> First, set NAT traversal to STUN and discover global IP to external.  Then go to incoming calls (at the account level, not global).  Make sure it is set to Push, then select Push options.  Turn simulate NAT off.

Для чего установил для учетной записи сипнета STUN-сервер:

	stun.sipnet.ru:3478

Переключил определение глобального IP на использование внешнего поставщика. И явно указал для учетной записи использование push-уведомлений, отключив дополнительно имитацию NAT.

После проведенных операций проблема с прохождением звука во входящих звонках была решена. И так как теперь для входящих звонков используется push-уведомления с сервера Acrobits, расход заряда батареи минимальна.